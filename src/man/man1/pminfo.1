'\"macro stdmacro
.\"
.\" Copyright (c) 2016-2018 Red Hat.
.\" Copyright (c) 2000 Silicon Graphics, Inc.  All Rights Reserved.
.\"
.\" This program is free software; you can redistribute it and/or modify it
.\" under the terms of the GNU General Public License as published by the
.\" Free Software Foundation; either version 2 of the License, or (at your
.\" option) any later version.
.\"
.\" This program is distributed in the hope that it will be useful, but
.\" WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
.\" or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
.\" for more details.
.\"
.TH PMINFO 1 "PCP" "Performance Co-Pilot"
.SH NAME
\f3pminfo\f1 \- display information about performance metrics
.SH SYNOPSIS
\fBpminfo\fR
[\fB\-dfFIlLmMstTvxz\fR]
[\fB\-a\fR \fIarchive\fR]
[\fB\-b\fR \fIbatchsize\fR]
[\fB\-c\fR \fIdmfile\fR]
[\fB\-h\fR \fIhostname\fR]
[\fB\-K\fR \fIspec\fR]
[\fB\-\fR[\fBn\fR|\fBN\fR] \fIpmnsfile\fR]
[\fB\-O\fR \fItime\fR]
[\fB\-Z\fR \fItimezone\fR]
[\fImetricname\fR | \fIpmid\fR | \fIindom\fR]...
.SH DESCRIPTION
.B pminfo
displays various types of information about performance metrics
available through the facilities of the Performance Co-Pilot (PCP).
.PP
Normally
.B pminfo
operates on the distributed Performance Metrics Name Space (PMNS),
however if the \fB\-n\fR/\fB\-\-namespace\fR option is
specified an alternative local PMNS is loaded from the file
.IR pmnsfile.
The \fB\-N\fR/\fB\-\-uniqnames\fR option supports the same function
as \fB\-n\fR/\fB\-\-namespace\fR, except for the handling of
duplicate names for the same Performance Metric Identifier (PMID) in
.I pmnsfile
\- duplicate names are allowed with \fB\-n\fR/\fB\-\-namespace\fR
but they are not allowed with \fB\-N\fR/\fB\-\-uniqnames\fR.
.PP
The metrics of interest are named in the
.I metricname
arguments.
If
.I metricname
is a non-leaf node in the PMNS, then
.B pminfo
will recursively descend the PMNS and report on all leaf nodes.
If no
.I metricname
argument is given, the root of the PMNS is used.
.PP
If the
.I metricname
argument is in numeric dotted notation,
it is interpreted as either a 3-dotted
.I pmid
(metric identifier \- domain, cluster, item numbers) or
a 2-dotted
.I indom
(instance domain identifier \- domain, serial number).
In the
.I pmid
case, a reverse PMID-to-name lookup is performed, and in the
.I indom
case, the instance domain is reported directly.
This latter mode can be used to report the instance domain
``one line'' and long form help text summaries.
.PP
Unless directed to another host by the \fB\-h\fR/\fB\-\-host\fR
option, by default
.B pminfo
will contact the Performance Metrics Collector Daemon
(PMCD) on the local host.
The connection to a PMCD is only required if
.B pminfo
requires distributed PMNS information, and/or meta-data
describing metrics, and/or metric values, and/or help text.
.PP
The \fB\-a\fR/\fB\-\-archive\fR option causes
.B pminfo
to use the specified set of archives rather than connecting to a PMCD.
The argument to \fB\-a\fR/\fB\-\-archive\fR is a comma-separated list
of names, each of which may be the base name of an archive or the
name of a directory containing one or more archives.
.PP
The \fB\-L\fR/\fB\-\-local\-PMDA\fR option causes
.B pminfo
to use a local context to collect metrics from PMDAs on the local host
without PMCD.
Only some metrics are available in this mode.
.PP
The \fB\-a\fR/\fB\-\-archive\fR, \fB\-h\fR/\fB\-\-host\fR
and \fB\-L\fR/\fB\-\-local\-PMDA\fR options are mutually exclusive.
.PP
The \fB\-b\fR/\fB\-\-batch\fR option may be used to define the
maximum size of the group of metrics to be fetched in a single
request for the \fB\-f/\fB\-\-fetch\fR and \fB\-v/\fB\-\-verify\fR
options.
The default value for
.I batchsize
is 128.
.PP
Other options control the specific information to be reported.
.TP 5
\fB\-c\fR \fIdmfile\fR, \fB\-\-derived\fR=\fIdmfile\fR
The
.I dmfile
argument specifies a file that contains derived metric definitions
in the format described for
.BR pmLoadDerivedConfig (3).
The \fB\-c\fR/\fB\-\-derived\fR
option provides a way to load derived metric definitions
that is an alternative to the more generic use of the
.B PCP_DERIVED_CONFIG
environment variable as described in
.BR PCPIntro (1).
Using the \fB\-c\fR/\fB\-\-derived\fR option and the
.B PCP_DERIVED_CONFIG
environment variable to specify the
.B same
configuration is a bad idea, so choose one or the other method.
.TP
\fB\-d\fR, \fB\-\-desc\fR
Metric descriptions detailing the PMID, data type, data semantics, units,
scale and associated instance domain.
.TP
\fB\-f\fR, \fB\-\-fetch\fR
Fetch and print values for all instances.
When fetching from a set of archives, only
those instances present in the first archive record for a metric will be
displayed; see also the \fB\-O\fR/\fB\-\-origin\fR option, else use
.BR pmdumplog (1)
which may be a better tool for examining archives.
.TP
\fB\-F\fR, \fB\-\-fetchall\fR
Same as
.B \-f
but try harder to fetch instances for metrics which have non-enumerable
instance domains (e.g. metrics in the ``proc'' subtree of the default
PMNS on some platforms).
.TP
\fB\-I\fR, \fB\-\-fullindom\fR
Print the InDom in verbose mode.
.TP
\fB\-K\fR \fIspec\fR, \fB\-\-spec\-local\fR=\fIspec\fR
When using the \fB\-L/\fB\-\-local-PMDA\fR option to fetch metrics from
a local context, this option controls the DSO PMDAs that should be made
accessible.
The
.I spec
argument conforms to the syntax described in
.BR pmSpecLocalPMDA (3).
More than one \fB\-K\fR/\fB\-\-spec-local\fR option may be used.
.TP
\fB\-l\fR, \fB\-\-labels\fR
Print label sets associated with metrics and instances.
Labels are optional metric metadata described in detail in
.BR pmLookupLabels (3).
.TP
\fB\-m\fR, \fB\-\-pmid\fR
Print the PMID in terse mode.
.TP
\fB\-M\fR, \fB\-\-fullpmid\fR
Print the PMID in verbose mode.
.TP
\fB\-O\fR \fItime\fR, \fB\-\-origin\fR=\fItime\fR
When used in conjunction with an archive source of metrics and the
options \fB\-f/\fB\-\-fetch\fR, the
.I time
argument defines a time origin at which the metrics should be
fetched from the set of archives.
Refer to
.BR PCPIntro (1)
for a complete description of this option, and the syntax for the
.I time
argument.
.TP
\fB\-s\fR, \fB\-\-series\fR
Print time series identifiers associated with metrics, instances and
sources.
These unique identifiers are calculated from intrinsic (non-optional)
labels and other metric metadata associated with each PMAPI context
(sources), metrics and instances.
Archive, local context or
.BR pmcd (1)
connections for the same host all produce the same source identifier.
See also
.BR pmLookupLabels (3)
and the \fB\-l/\fB\-\-labels\fR option.
.TP
\fB\-t\fR, \fB\-\-oneline\fR
Print the ``one line'' help summary, if available.
.TP
\fB\-T\fR, \fB\-\-helptext\fR
Print the help text, if available.
.TP
\fB\-v\fR, \fB\-\-verify\fR
Verify mode in which descriptions and values are retrieved, but only
error conditions are reported.
This option silently disables any output from the options
\fB\-f\fR/\fB\-\-fetch\fR,
\fB\-l\fR/\fB\-\-labels\fR,
\fB\-I\fR/\fB\-\-fullindom\fR,
\fB\-M\fR/\fB\-\-fullpmid\fR,
\fB\-m\fR/\fB\-\-pmid\fR,
\fB\-t\fR/\fB\-\-oneline\fR
and
\fB\-T\fR/\fB\-\-helptext\fR.
.TP
\fB\-x\fR, \fB\-\-events\fR
Like the \fB\-f\fR/\fB\-\-fetch\fR option,
but with the additional functionality that if a value is
processed that is of type PM_TYPE_EVENT or PM_TYPE_HIGHRES_EVENT, then
the event records will be unpacked and the details of each event record
reported.
.SH FILES
.PD 0
.TP 10
.BI $PCP_VAR_DIR/pmns/ *
default local PMNS specification files
.PD
.SH "PCP ENVIRONMENT"
Environment variables with the prefix
.B PCP_
are used to parameterize the file and directory names
used by PCP.
On each installation, the file
.I /etc/pcp.conf
contains the local values for these variables.
The
.B $PCP_CONF
variable may be used to specify an alternative
configuration file,
as described in
.BR pcp.conf (5).
.SH SEE ALSO
.BR PCPIntro (1),
.BR pmcd (1),
.BR pmchart (1),
.BR pmdumplog (1),
.BR pmprobe (1),
.BR pmrep (1),
.BR pmval (1),
.BR PMAPI (3),
.BR pmLookupLabels (3),
.BR pmLoadDerivedConfig (3),
.BR pmSpecLocalPMDA (3),
.BR pcp.conf (5),
.BR pcp.env (5)
and
.BR pmns (5).
